(this["webpackJsonppre-assignment-ui"]=this["webpackJsonppre-assignment-ui"]||[]).push([[0],{105:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(10),i=t.n(l),o=t(161),c=t(160),s=t(34),m=t(66),u=t(27),d=t(158),p=t(46),g=t(163),f=t(159),E=t(63),b=t.n(E),h=t(62),v=t(36),y=t.n(v),k="https://dwellet-api.harrytang.com/apartments",O=function(e){return y.a.get("".concat(k,"/?$limit=").concat(e.limit,"&$skip=").concat(e.skip,"&$sort[createdAt]=-1")).then((function(e){return e.data}))},j=function(e){return y.a.post(k,e).then((function(e){return e.data}))},C=function(e,a){return y.a.patch("".concat(k,"/").concat(e),a).then((function(e){return e.data}))},x=function(e){return y.a.delete("".concat(k,"/").concat(e)).then((function(e){return e.data}))},w=t(148),H=Object(h.a)((function(e){return{footer:{borderTop:"1px solid ".concat(e.palette.divider),marginTop:e.spacing(4),paddingTop:e.spacing(2)}}})),N=function(){var e=H();return r.a.createElement(p.a,{variant:"body2",color:"textSecondary",align:"center",className:e.footer},"Copyright \xa9 ",r.a.createElement(w.a,{color:"inherit",href:"https://dwellet.harrytang.com/"},"dwellet")," ",(new Date).getFullYear(),".")},P=t(149),A=t(68),q=t(162),D=t(150),S=t(164),B=t(106),_=Object(h.a)((function(e){return{layout:Object(s.a)({width:"auto",marginLeft:e.spacing(2),marginRight:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(2)),{width:600,marginLeft:"auto",marginRight:"auto"}),paper:Object(s.a)({marginTop:e.spacing(3),marginBottom:e.spacing(3),padding:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(3)),{marginTop:e.spacing(6),marginBottom:e.spacing(6),padding:e.spacing(3)}),buttons:{display:"flex",justifyContent:"flex-end"},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1)}}})),F=function(e){var a=e.closeFormHandler,t=e.formAction,n=e.formData,l=e.submitHandler,i=e.fromDataHandler,o=_();return r.a.createElement("main",{className:o.layout},r.a.createElement(A.a,{className:o.paper},r.a.createElement(p.a,{component:"h1",variant:"h4",align:"center"},null===t?"New Apartment":"Update Apartment"),r.a.createElement(P.a,{container:!0,spacing:3},r.a.createElement(P.a,{item:!0,xs:12},r.a.createElement(q.a,{required:!0,id:"address",name:"address",label:"Address",fullWidth:!0,onChange:i,value:n.address})),r.a.createElement(P.a,{item:!0,xs:12,sm:6},r.a.createElement(q.a,{required:!0,id:"postalCode",name:"postalCode",label:"Postal Code",fullWidth:!0,onChange:i,value:n.postalCode})),r.a.createElement(P.a,{item:!0,xs:12,sm:6},r.a.createElement(q.a,{required:!0,id:"postalArea",name:"postalArea",label:"Postal Area",fullWidth:!0,onChange:i,value:n.postalArea})),r.a.createElement(P.a,{item:!0,xs:12,sm:4},r.a.createElement(q.a,{required:!0,id:"rooms",name:"rooms",label:"Rooms",fullWidth:!0,onChange:i,value:n.rooms})),r.a.createElement(P.a,{item:!0,xs:12,sm:4},r.a.createElement(q.a,{required:!0,id:"squareMeters",name:"squareMeters",label:"Square Meters",fullWidth:!0,onChange:i,value:n.squareMeters})),r.a.createElement(P.a,{item:!0,xs:12,sm:4},r.a.createElement(D.a,{control:r.a.createElement(S.a,{color:"secondary",name:"hasElevator",onChange:i,checked:n.hasElevator}),label:"Elevator"})),r.a.createElement(P.a,{item:!0,xs:12,sm:6},r.a.createElement(q.a,{required:!0,id:"buildYear",name:"buildYear",label:"Build Year",fullWidth:!0,onChange:i,value:n.buildYear})),r.a.createElement(P.a,{item:!0,xs:12,sm:6},r.a.createElement(q.a,{required:!0,id:"price",name:"price",label:"Price",fullWidth:!0,onChange:i,value:n.price})),r.a.createElement(P.a,{item:!0,xs:12},r.a.createElement(q.a,{required:!0,id:"notes",name:"notes",label:"Notes",fullWidth:!0,multiline:!0,rows:"6",onChange:i,value:n.notes})),r.a.createElement("div",{className:o.buttons},r.a.createElement(B.a,{variant:"contained",color:"primary",className:o.button,onClick:l},"Submit"),r.a.createElement(B.a,{variant:"contained",className:o.button,onClick:a},"Back")))))},T=t(151),W=t(152),Y=t(153),M=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{item:!0,xs:4},r.a.createElement(p.a,{variant:"body1"},e.attr)),r.a.createElement(P.a,{item:!0,xs:8},r.a.createElement(p.a,{variant:"body1"},e.value)))},R=t(154),L=Object(h.a)((function(e){return{cardGrid:{paddingTop:e.spacing(8),paddingBottom:e.spacing(8)},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1}}})),z=function(e){var a=e.apartment,t=e.openFormHandler,n=e.deleteHandler,l=L();return r.a.createElement(P.a,{item:!0,key:a._id,xs:12,sm:6,md:4},r.a.createElement(T.a,{className:l.card},r.a.createElement(W.a,{className:l.cardMedia,image:"https://source.unsplash.com/featured/?house",title:a.address}),r.a.createElement(Y.a,{className:l.cardContent},r.a.createElement(P.a,{container:!0},r.a.createElement(M,{attr:"Address",value:a.address}),r.a.createElement(M,{attr:"Postal Code",value:a.postalCode}),r.a.createElement(M,{attr:"Postal Area",value:a.postalArea}),r.a.createElement(M,{attr:"Rooms",value:a.rooms}),r.a.createElement(M,{attr:"Square m\xb2",value:a.squareMeters}),r.a.createElement(M,{attr:"Build Year",value:a.buildYear}),"boolean"===typeof a.hasElevator?r.a.createElement(M,{attr:"Elevator",value:a.hasElevator?"Yes":"No"}):null,r.a.createElement(M,{attr:"Price",value:a.price}),"string"===typeof a.notes?r.a.createElement(M,{attr:"Note",value:a.notes}):null)),r.a.createElement(R.a,null,r.a.createElement(B.a,{size:"small",color:"primary",variant:"contained",onClick:function(){return t(a._id,a)}},"Edit"),r.a.createElement(B.a,{size:"small",color:"secondary",variant:"contained",onClick:function(){return n(a._id)}},"Delete"))))},I=t(155),$=function(e){var a=e.apartments,t=e.pagination,n=e.prePageHandler,l=e.nextPageHandler,i=e.openFormHandler,o=e.deleteHandler;return r.a.createElement(r.a.Fragment,null,a.length>0?r.a.createElement(P.a,{container:!0,spacing:4},a.map((function(e){return r.a.createElement(z,{key:e._id,apartment:e,openFormHandler:i,deleteHandler:o})})),r.a.createElement(P.a,{container:!0,spacing:1,direction:"column",alignItems:"center"},r.a.createElement(P.a,{item:!0},r.a.createElement(I.a,{color:"primary","aria-label":"outlined primary button group"},r.a.createElement(B.a,{variant:"contained",disabled:0===t.skip,onClick:n},"PRE"),r.a.createElement(B.a,{variant:"contained",disabled:t.skip+t.limit>=t.total,onClick:l},"NEXT"))))):r.a.createElement(p.a,{variant:"body1"},-1===t.total?"Loading...":"No data"))},G=t(156),J=t(166),U=t(157),X=Object(h.a)((function(e){return{success:{backgroundColor:G.a[600]},error:{backgroundColor:e.palette.error.dark},message:{display:"flex",alignItems:"center"}}}));function K(e){var a=X(),t=e.message,n=e.type;return r.a.createElement(U.a,{className:"success"===n?a.success:a.error,"aria-describedby":"client-snackbar",message:r.a.createElement("span",{id:"client-snackbar",className:a.message},t)})}var Q=function(e){var a=e.message,t=e.type,n=e.closeNotificationHandler;return null===a?null:r.a.createElement(J.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:!0,autoHideDuration:5e3,onClose:n},r.a.createElement(K,{type:t,message:a}))};function V(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}var Z=Object(h.a)((function(e){return{header:{flex:1,borderBottom:"1px solid ".concat(e.palette.divider),paddingBottom:e.spacing(4),marginBottom:e.spacing(4)},newBtn:{float:"right"}}})),ee=function(){var e=Z(),a={address:"",postalCode:"",postalArea:"",rooms:"",squareMeters:"",hasElevator:!1,buildYear:"",price:"",notes:""},t=Object(n.useState)({message:null,type:"success"}),l=Object(u.a)(t,2),i=l[0],o=l[1],c=Object(n.useState)([]),E=Object(u.a)(c,2),h=E[0],v=E[1],y=Object(n.useState)("closed"),k=Object(u.a)(y,2),w=k[0],H=k[1],P=Object(n.useState)(null),A=Object(u.a)(P,2),q=A[0],D=A[1],S=Object(n.useState)(a),B=Object(u.a)(S,2),_=B[0],T=B[1],W=Object(n.useState)({total:-1,limit:6,skip:0}),Y=Object(u.a)(W,2),M=Y[0],R=Y[1];Object(n.useEffect)((function(){O({limit:6,skip:0}).then((function(e){R({total:e.total,limit:e.limit,skip:e.skip}),v(e.data)}))}),[]);var L=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;D(e),T(null!==t?t:a),H("opened")};return r.a.createElement(d.a,{maxWidth:"lg"},r.a.createElement(g.a,{my:4},r.a.createElement(p.a,{variant:"h3",component:"h1",gutterBottom:!0,className:e.header},"Apartments",r.a.createElement(f.a,{color:"primary","aria-label":"add",className:e.newBtn,onClick:function(){return L(null)}},r.a.createElement(b.a,null))),r.a.createElement(Q,{message:i.message,type:i.type,closeNotificationHandler:function(){o({message:null,type:"success"})}}),"closed"===w?r.a.createElement($,{apartments:h,pagination:M,prePageHandler:function(){O({limit:M.limit,skip:M.skip-M.limit}).then((function(e){R({total:e.total,limit:e.limit,skip:e.skip}),v(e.data)}))},nextPageHandler:function(){O({limit:M.limit,skip:M.skip+M.limit}).then((function(e){R({total:e.total,limit:e.limit,skip:e.skip}),v(e.data)}))},openFormHandler:L,deleteHandler:function(e){window.confirm("Do you really want to delete this?")&&x(e).then((function(e){0===h.filter((function(a){return a._id!==e._id})).length?O({limit:M.limit,skip:0}).then((function(e){R({total:e.total,limit:e.limit,skip:e.skip}),v(e.data)})):v(h.filter((function(a){return a._id!==e._id})))}))}}):r.a.createElement(F,{closeFormHandler:function(){H("closed")},formAction:q,formData:_,submitHandler:function(){null===q?j(_).then((function(e){H("closed"),O({limit:M.limit,skip:0}).then((function(e){R({total:e.total,limit:e.limit,skip:e.skip}),v(e.data),o({message:"Apartment has been added",type:"success"})}))})).catch((function(e){o({message:"Cannot add new apartment, please check your data",type:"error"})})):C(q,_).then((function(e){var a=h.findIndex((function(a){return a._id===e._id})),t=Object(m.a)(h);t[a]=e,H("closed"),v(t),o({message:"Apartment has been updated",type:"success"})})).catch((function(e){o({message:"Cannot update apartment, please check your data",type:"error"})}))},fromDataHandler:function(e){var a=function(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?V(Object(t),!0).forEach((function(a){Object(s.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):V(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}({},_),t=e.target.name,n="";n="hasElevator"!==t?e.target.value:e.target.checked,a[t]=n,T(a)}}),r.a.createElement(N,null)))},ae=t(64),te=t.n(ae),ne=t(65),re=Object(ne.a)({palette:{primary:{main:"#556cd6"},secondary:{main:"#f50057"},error:{main:te.a.A400},background:{default:"#fff"}}});i.a.render(r.a.createElement(c.a,{theme:re},r.a.createElement(o.a,null),r.a.createElement(ee,null)),document.querySelector("#root"))},78:function(e,a,t){e.exports=t(105)}},[[78,1,2]]]);
//# sourceMappingURL=main.2697f56f.chunk.js.map